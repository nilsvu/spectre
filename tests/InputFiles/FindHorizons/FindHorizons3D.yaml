# Distributed under the MIT License.
# See LICENSE.txt for details.

# Executable: FindHorizons3D
# Check: parse

DomainCreator:
  BinaryCompactObject:
    ObjectA:
      InnerRadius: 0.95
      OuterRadius: 5.
      XCoord: *x_left
      Shape:
        Mass: *mass_left
        Spin: *spin_left
        Modes: [5, 5]
      Interior:
        ExciseWithBoundaryCondition:
          ApparentHorizon:
            Center: [*x_left, 0., 0.]
            Rotation: [0., -0.22752392, 0.35057257]
            Lapse: *kerr_left
            NegativeExpansion: *kerr_left
      UseLogarithmicMap: True
    ObjectB:
      InnerRadius: 0.45
      OuterRadius: 5.
      XCoord: *x_right
      Shape:
        Mass: *mass_right
        Spin: *spin_right
        Modes: [5, 5]
      Interior:
        ExciseWithBoundaryCondition:
          ApparentHorizon:
            Center: [*x_right, 0., 0.]
            Rotation: [0., 0., 0.]
            Lapse: *kerr_right
            NegativeExpansion: *kerr_right
      UseLogarithmicMap: True
    EnvelopingCube:
      Radius: 55.
      UseProjectiveMap: True
      Sphericity: 0.
    OuterShell:
      InnerRadius: 60.
      OuterRadius: 300.
      RadialDistribution: Inverse
      BoundaryCondition: Flatness
    InitialRefinement:
      ObjectAShell:               [1, 1, 1]
      ObjectBShell:               [1, 1, 1]
      ObjectACube:                [1, 1, 0]
      ObjectBCube:                [1, 1, 0]
      EnvelopingCubeUpperZLeft:   [1, 1, 0]
      EnvelopingCubeLowerZLeft:   [1, 1, 0]
      EnvelopingCubeUpperYLeft:   [1, 1, 0]
      EnvelopingCubeLowerYLeft:   [1, 1, 0]
      EnvelopingCubeLowerX:       [1, 1, 0]
      EnvelopingCubeUpperZRight:  [1, 1, 0]
      EnvelopingCubeLowerZRight:  [1, 1, 0]
      EnvelopingCubeUpperYRight:  [1, 1, 0]
      EnvelopingCubeLowerYRight:  [1, 1, 0]
      EnvelopingCubeUpperX:       [1, 1, 0]
      CubedShellUpperZLeft:       [0, 1, 0]
      CubedShellLowerZLeft:       [0, 1, 0]
      CubedShellUpperYLeft:       [0, 1, 0]
      CubedShellLowerYLeft:       [0, 1, 0]
      CubedShellLowerX:           [1, 1, 0]
      CubedShellUpperZRight:      [0, 1, 0]
      CubedShellLowerZRight:      [0, 1, 0]
      CubedShellUpperYRight:      [0, 1, 0]
      CubedShellLowerYRight:      [0, 1, 0]
      CubedShellUpperX:           [1, 1, 0]
      OuterShellUpperZLeft:       [0, 1, 0]
      OuterShellLowerZLeft:       [0, 1, 0]
      OuterShellUpperYLeft:       [0, 1, 0]
      OuterShellLowerYLeft:       [0, 1, 0]
      OuterShellLowerX:           [1, 1, 0]
      OuterShellUpperZRight:      [0, 1, 0]
      OuterShellLowerZRight:      [0, 1, 0]
      OuterShellUpperYRight:      [0, 1, 0]
      OuterShellLowerYRight:      [0, 1, 0]
      OuterShellUpperX:           [1, 1, 0]
    InitialGridPoints:
      ObjectAShell:   [8, 8, 11]
      ObjectBShell:   [8, 8, 11]
      ObjectACube:    [8, 8, 9]
      ObjectBCube:    [8, 8, 9]
      EnvelopingCube: [8, 8, 8]
      CubedShell:     [8, 8, 8]
      OuterShell:     [8, 8, 7]

Importers:
  VolumeData:
    FileGlob: "/Users/nlf/Projects/Papers/phd-thesis/data/bbh_slice_spins/BbhVolume*.h5"
    Subgroup: "VolumeData"
    ObservationValue: Last

ApparentHorizons:
  AhA:
    InitialGuess:
      Lmax: 10
      Radius: 1.3
      Center: [-3.87, 0., 0.]
    FastFlow:
      Flow: Fast
      Alpha: 1.
      Beta: 0.5
      AbsTol: 1.e-12
      TruncationTol: 0.01
      DivergenceTol: 1.2
      DivergenceIter: 5
      MaxIts: 100
    Verbosity: Verbose
  AhB:
    InitialGuess:
      Lmax: 10
      Radius: 0.5
      Center: [11.61, 0., 0.]
    FastFlow:
      Flow: Fast
      Alpha: 1.
      Beta: 0.5
      AbsTol: 1.e-12
      TruncationTol: 0.01
      DivergenceTol: 1.2
      DivergenceIter: 5
      MaxIts: 100
    Verbosity: Verbose

Observers:
  VolumeFileName: "FindHorizons3DVolume"
  ReductionFileName: "FindHorizons3DReductions"
